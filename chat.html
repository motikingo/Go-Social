<!DOCTYPE html>

<html>
<head>

    <script>
        
        window.onload = ()=>{
            var co;
            var s = document.getElementById("123")
            var c = document.getElementById("come")
        
            if (window["WebSocket"]){
                co = new WebSocket("ws://localhost:8080/ws")
                co.onclose = ()=>{
                    console.log("am closing....")
                }
                co.onmessage = (m)=>{
                    console.log(m.data)
                    var child = document.createElement("p")
                    child.innerHTML=m.data
                    c.appendChild(child)
                    var scroll = c.scollTop > c.scrollHeight-c.cleintHeight - 1
                    
                    if (scroll){

                        c.scollTop = c.scrollHeight -c.cleintHeight
                    }
                }
            
            }
            document.getElementById("fu").onsubmit = function(){
                console.log("chat....")
                co.send(s.value)
                s.value = ""
                return false
            }
        }
        
    </script>

    <style>
          
    </style>
</head>
<body>
    <form id = "fu">
        <div id = "come"></div>
        <input type= "text" id = "123"/>
        <input type= "submit" value = "chat"/>
    </form>
   
</body>
</html>